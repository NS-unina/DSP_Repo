/*! For license information please see editor-block.js.LICENSE.txt */
(()=>{"use strict";var e={251:(e,t,r)=>{var n=r(196),i=60103;if(60107,"function"==typeof Symbol&&Symbol.for){var s=Symbol.for;i=s("react.element"),s("react.fragment")}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l=Object.prototype.hasOwnProperty,a={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,s={},c=null,d=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,n)&&!a.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:i,type:e,key:c,ref:d,props:s,_owner:o.current}}t.jsx=c,t.jsxs=c},893:(e,t,r)=>{e.exports=r(251)},196:e=>{e.exports=window.React}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}(()=>{var e=r(893);const t=(0,e.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 255.8 255.8",xmlSpace:"preserve",children:(0,e.jsx)("g",{children:(0,e.jsx)("path",{d:"M127.9,0C57.3,0,0,57.3,0,127.9c0,70.6,57.3,127.9,127.9,127.9c70.6,0,127.9-57.3,127.9-127.9C255.8,57.3,198.5,0,127.9,0z M16.4,177.1l92.5-117.5L124.2,79l-77.3,98.1H16.4z M170.5,177.1l-38.9-49.4l15.5-19.6l54.4,69H170.5z M208.5,177.1L146.9,99 l-61.6,78.2h-31l92.5-117.5l92.5,117.5H208.5z"})})});function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var d=window.wp,u=window.React,h=d.components,p=h.Placeholder,f=h.Spinner,w=d.i18n.__,m=d.apiRequest;const v=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(h,r);var n,l,c,d=o(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=d.call(this,e)).state={height:200,previewIsLoading:!0,slideshowId:null,html:"",previewErrorMessage:""},t.handleOnLoad=t.handleOnLoad.bind(a(t)),t.setHeight=t.setHeight.bind(a(t)),t.getPreview=t.getPreview.bind(a(t)),t.handleResize=t.handleResize.bind(a(t)),t.iframe=u.createRef(),t}return n=h,(l=[{key:"componentDidMount",value:function(){this.getPreview(),window.addEventListener("resize",this.handleResize),this.props.componentDidMount&&this.props.componentDidMount(this)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),this.props.componentWillUnmount&&this.props.componentWillUnmount()}},{key:"componentDidUpdate",value:function(e){this.props.slideshowId===e.slideshowId&&this.props.refresh===e.refresh||(this.setHeight(200),this.getPreview(),this.iframe.current.contentDocument.location.reload(!0))}},{key:"handleOnLoad",value:function(e){var t=this;this.state.html&&(this.iframe.current.contentDocument.editor_block=this,setTimeout((function(){clearInterval(t.loadInterval),t.setHeight(t.iframe.current.contentDocument.body.clientHeight)}),50),this.setState({previewIsLoading:!1}))}},{key:"handleResize",value:function(e){this.setHeight(this.iframe.current.contentDocument.body.clientHeight)}},{key:"setHeight",value:function(e){this.setState({height:e>200?e:200})}},{key:"getPreview",value:function(){var e=this;try{this.setState({html:"",previewIsLoading:!0,previewErrorMessage:""}),m({path:"/metaslider/v1/slideshow/preview",data:{action:"ms_get_preview",slideshow_id:this.props.slideshowId,override_preview_style:!0}}).then((function(t){e.setState({html:t.data}),e.setHeight(e.iframe.current.contentDocument.body.clientHeight)})).fail((function(t){410===t.status?(e.setState({previewIsLoading:!1,previewErrorMessage:t.responseJSON.data.message}),console.error("MetaSlider (Gutenberg): Slideshow not found:",t)):console.error("MetaSlider (Gutenberg): Could not load the preview:",t)}))}catch(e){console.error("MetaSlider (Gutenberg): A general error occured:",e)}}},{key:"render",value:function(){return(0,e.jsxs)("div",{className:this.props.className+(this.state.previewIsLoading?"":" loading")+" ms-preview",children:[(0,e.jsx)("iframe",{height:this.state.height,srcDoc:this.state.html||"",onLoad:this.handleOnLoad,ref:this.iframe},"preview-iframe"),(0,e.jsx)("div",{className:"ms-preview__trigger"},"trigger"),this.state.previewIsLoading&&(0,e.jsxs)(p,{className:"ms-loader",label:[t," MetaSlider"],children:[(0,e.jsx)(f,{})," ",w("Loading slideshow","ml-slider")]},"ms-loader"),this.state.previewErrorMessage&&(0,e.jsx)(p,{className:"ms-loader",label:[t," MetaSlider"],children:this.state.previewErrorMessage},"ms-preview-empty")]})}}])&&i(n.prototype,l),c&&i(n,c),Object.defineProperty(n,"prototype",{writable:!1}),h}(u.Component);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=window.wp,j=S.i18n.__,x=S.components.Toolbar,_={normal:{icon:"align-center",title:j("Normal width","ml-slider")},wide:{icon:"align-wide",title:j("Wide width","ml-slider")},full:{icon:"align-full-width",title:j("Full width","ml-slider")}},O=["normal","wide","full"];function E(t){var r=t.value,n=t.onChange,i=t.controls;var s=void 0===i?O:i;return(0,e.jsx)(x,{controls:s.map((function(e){return b(b({},_[e]),{},{isActive:r===e,onClick:(t=e,function(){return n(r===t?void 0:t)})});var t}))})}var P=window.wp,C=P.i18n.__,k=P.components.SelectControl;function I(t){var r=t.props,n=r.attributes.slideshowId,i=r.slideshows;return(0,e.jsx)(k,{label:C("Select a slideshow","ml-slider"),value:n,options:[{label:"-- "+C("Select a slideshow","ml-slider")+" --",value:0}].concat(i.items.map((function(e){return{key:e.id,label:P.htmlEntities.decodeEntities(e.title)+" (#"+e.id+")",value:e.id}}))),onChange:function(e){e=parseInt(e),r.setAttributes({slideshowId:e})}})}var L=window.wp,M=L.i18n.__,R=L.components.Toolbar;function D(t){t.value,t.onChange;var r=t.onClick;return(0,e.jsx)(R,{controls:[{icon:"update",title:M("Update preview","ml-slider"),isActive:!1,onClick:r}]})}const N=window.wp.blockEditor;var H=window.wp,T=H.i18n.__,z=H.element.Fragment,A=H.data.withSelect,W=H.components,B=W.TextControl,U=W.Placeholder,q=W.Spinner,F=W.PanelBody,G=W.BaseControl,$=window.metaslider_block_config||{};const J=A((function(e){return{wideControlsEnabled:e("core/editor").getEditorSettings().alignWide}}))((function(r){var n=r.slideshows,i=r.className,s=r.isSelected,o=r.wideControlsEnabled,l=void 0!==o&&o,a=r.attributes.slideshowId,c=r.attributes.stretch,d=r.attributes.containerClass,u=n.isLoading,h=n.items.length||!1,p=r.attributes.refreshPreview,f=s&&(0,e.jsxs)(z,{children:[(0,e.jsx)(N.InspectorControls,{children:(0,e.jsxs)(F,{title:T("Slideshow settings","ml-slider"),children:[h&&(0,e.jsx)(I,{props:r}),0!==a&&(0,e.jsx)("a",{href:$.plugin_page+"&id="+a,target:"_blank",className:"ms-edit-current-slideshow",children:T("Edit slideshow","ml-slider")}),l&&(0,e.jsx)(G,{label:T("Slideshow width","ml-slider"),children:(0,e.jsx)(E,{value:c,onChange:function(e){setTimeout((function(){window.dispatchEvent(new Event("resize"))}),50),r.setAttributes({stretch:e})}})})]})},"inspector"),(0,e.jsx)(N.InspectorAdvancedControls,{children:(0,e.jsx)(G,{label:T("Additional CSS Class","ml-slider"),children:(0,e.jsx)(B,{value:d,onChange:function(e){r.setAttributes({containerClass:e})}})})}),(0,e.jsxs)(N.BlockControls,{children:[l&&(0,e.jsx)(E,{label:T("Slideshow width","ml-slider"),value:c,onChange:function(e){setTimeout((function(){window.dispatchEvent(new Event("resize"))}),50),r.setAttributes({stretch:e})}}),0!==a&&(0,e.jsx)(D,{label:T("Refresh preview","ml-slider"),onClick:function(){r.setAttributes({refreshPreview:!p})}},"refresh")]},"controls")]},"inspectorControls");return h||a||!u?h||a||u?[f,!!a&&(0,e.jsx)(v,{className:i,src:$.preview_url+"&slideshow_id="+a,slideshowId:a,isSelected:s,refresh:p},"preview"),!a&&(0,e.jsx)(U,{className:r.className,label:[t," MetaSlider"],children:(0,e.jsx)(I,{props:r},"slidehow-selector")},"instructions")]:(0,e.jsxs)(U,{className:i,label:[t," MetaSlider"],children:[T("No slideshows found.","ml-slider")," ",(0,e.jsx)("a",{target:"_blank",href:$.plugin_page,children:T("Create one now!","ml-slider")})]}):(0,e.jsxs)(U,{className:i,label:[t," MetaSlider"],children:[(0,e.jsx)(q,{},"spinner")," ",T("Loading slideshows list...","ml-slider")]})}));var X=window.wp.element.Fragment;const Y=function(t){var r=t.attributes,n=r.slideshowId,i=r.stretch,s=r.containerClass,o=i?"align"+i:"";return!!n&&(0,e.jsx)(X,{children:(0,e.jsxs)("div",{class:o,children:["[metaslider id=",n,' cssclass="',s,'"]']})})||""};var K=window.wp,Q=K.i18n.__,V=K.blocks.registerBlockType,Z=K.data,ee=Z.registerStore,te=Z.dispatch,re=Z.withSelect,ne=K.apiRequest,ie={items:[],isLoading:!0};ee("metaslider",{reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;return"SET_SLIDESHOWS"===t.type?{items:t.items,isLoading:!1}:e},actions:{setSlideshows:function(e){return{type:"SET_SLIDESHOWS",items:e}}},selectors:{getSlideshows:function(e){return e}},resolvers:{getSlideshows:function(e,t){try{ne({path:"/metaslider/v1/slideshow/list"}).then((function(e){!0===e.success?te("metaslider").setSlideshows(e.data):(console.warn("MetaSlider: API Request error:",e.data.message),te("metaslider").setSlideshows([]))}))}catch(e){console.warn("MetaSlider: API Request error:",e),te("metaslider").setSlideshows([])}}}}),V("metaslider/slider",{title:"MetaSlider",description:Q("Use MetaSlider to insert slideshows and sliders in your page","ml-slider"),icon:t,category:"common",keywords:[Q("slider","ml-slider"),Q("slideshow","ml-slider"),Q("gallery","ml-slider")],attributes:{slideshowId:{type:"number",default:0},stretch:{type:"string",default:"normal"},containerClass:{type:"string",default:""}},supports:{customClassName:!1},edit:re((function(e,t){return{slideshows:(0,e("metaslider").getSlideshows)()}}))(J),save:function(e){return Y(e)},getEditWrapperProps:function(e){var t=e.stretch;if(-1!==["wide","full","normal"].indexOf(t))return{"data-align":t}}})})()})();